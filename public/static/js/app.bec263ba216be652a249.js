webpackJsonp([1],{133:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.router=void 0;var a=s(7),i=n(a),o=s(306),r=n(o),l=s(88),u=n(l),c=s(660),d=n(c),f=s(22),m=n(f),h=s(578),p=n(h);s(621);var v=s(658),_=n(v),b=s(337),C=n(b);i.default.config.debug=!1,r.default.defaults.baseURL="http://sol-nu.ru/api/",r.default.defaults.headers.common.Accept="application/json",r.default.interceptors.response.use(function(t){return t},function(t){401===t.response.status&&u.default.logout()}),i.default.$http=r.default,m.default.dispatch("auth/check"),m.default.state.auth.user||u.default.getUser(),i.default.use(p.default),i.default.use(_.default);var g=e.router=new _.default({routes:C.default});g.beforeEach(function(t,e,s){t.matched.some(function(t){return t.meta.auth})&&!m.default.state.auth.authenticated?s({name:"login"}):t.matched.some(function(t){return t.meta.admin})&&(m.default.state.auth.user&&!m.default.state.auth.user.is_admin||!m.default.state.auth.user)?s({name:"login"}):t.matched.some(function(t){return t.meta.guest})&&m.default.state.auth.authenticated?s({name:"home"}):s()}),d.default.sync(m.default,g),i.default.router=g,e.default={router:g}},134:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(342),i=n(a),o=s(341),r=n(o),l=s(343),u=n(l);e.default={getClients:i.default,deleteClient:r.default,updateClient:u.default}},135:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.CHECK="CHECK",a=e.LOGIN="LOGIN",i=e.LOGOUT="LOGOUT",o=e.SET_USER="SET_USER";e.default={CHECK:n,LOGIN:a,LOGOUT:i,SET_USER:o}},136:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SET_LIST="SET_LIST"},137:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SET_CATEGORIES="SET_CATEGORIES",e.SET_ORDERS="SET_ORDERS"},138:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SET_DATES="SET_DATES",e.SET_DEPARTMENT="SET_DEPARTMENT",e.SET_MASTER="SET_MASTER",e.SET_TIMETABLE="SET_TIMETABLE"},22:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(127),r=n(o),l=s(661),u=(n(l),s(353)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(u),d=s(368),f=n(d),m=s(364),h=n(m),p=s(356),v=n(p),_=s(360),b=n(_);i.default.use(r.default);e.default=new r.default.Store({actions:c,mutations:{SHOW_ALERT:function(){}},modules:{schedule:f.default,pos:h.default,auth:v.default,clients:b.default},strict:!1,plugins:[]})},302:function(t,e,s){s(626);var n=s(17)(s(328),s(653),null,null);t.exports=n.exports},303:function(t,e,s){s(622);var n=s(17)(s(334),s(644),null,null);t.exports=n.exports},304:function(t,e,s){"use strict";var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n),i=s(634),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(i);s(133),new a.default(o).$mount("#app")},324:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Simplert",props:{useRadius:{type:Boolean,default:!0},useIcon:{type:Boolean,default:!0}},data:function(){return{DEFAULT_TYPE:"info",DEFAULT_BTN_CLOSE_TEXT:"Close",DEFAULT_BTN_CONFIRM_TEXT:"Confirm",INVALID_TYPE:"INVALID_TYPE",showSimplert:!1,title:"",message:"",type:this.DEFAULT_TYPE,customClass:"",customIconUrl:"",onOpen:null,customCloseBtnText:this.DEFAULT_BTN_CLOSE_TEXT,customCloseBtnClass:"",onClose:null,useConfirmBtn:!1,customConfirmBtnText:this.DEFAULT_BTN_CONFIRM_TEXT,customConfirmBtnClass:"",onConfirm:null,disableOverlayClick:!1,hideAllButton:!1,showXclose:!1}},computed:{classSimplert:function(){var t=this.customClass;return this.showSimplert&&(t=this.customClass+" simplert--shown"),t},classContent:function(){var t="";return this.useRadius&&(t="simplert__content--radius"),t},classBtnClose:function(){var t="simplert__close";return this.useRadius&&(t="simplert__close simplert__close--radius"),this.customCloseBtnClass&&(t=this.customCloseBtnClass),t},classBtnConfirm:function(){var t="simplert__confirm";return this.useRadius&&(t="simplert__confirm simplert__confirm--radius"),this.customConfirmBtnClass&&(t=this.customConfirmBtnClass),t}},methods:{justCloseSimplert:function(){this.showSimplert=!1},closeOverlay:function(t){var e=this;t.target.className.indexOf("simplert--shown")>0&&!e.disableOverlayClick&&(e.showSimplert=!1)},whenConfirm:function(t){var e=this;t.preventDefault(),e.showSimplert=!1,null!==e.onConfirm&&e.onConfirm()},closeSimplert:function(t){var e=this;t.preventDefault(),e.showSimplert=!1,null!==e.onClose&&e.onClose()},openSimplert:function(t){var e=this;void 0!==t&&(e.showSimplert=!0,e.title=t.title,void 0!==t.message?e.message=t.message:e.message="",void 0!==t.type?e.type=t.type:e.type=e.DEFAULT_TYPE,void 0!==t.customClass?e.customClass=t.customClass:e.customClass="",void 0!==t.customIconUrl&&""!==t.customCloseBtnText?(e.customIconUrl=t.customIconUrl,e.type=e.INVALID_TYPE):e.customIconUrl="",void 0!==t.customCloseBtnText&&""!==t.customCloseBtnText?e.customCloseBtnText=t.customCloseBtnText:e.customCloseBtnText=e.DEFAULT_BTN_CLOSE_TEXT,void 0!==t.customCloseBtnClass?e.customCloseBtnClass=t.customCloseBtnClass:e.customCloseBtnClass="",void 0!==t.onClose&&null!==t.onClose?e.onClose=t.onClose:e.onClose=null,void 0!==t.useConfirmBtn?e.useConfirmBtn=t.useConfirmBtn:e.useConfirmBtn=!1,void 0!==t.customConfirmBtnText&&""!==t.customConfirmBtnText?e.customConfirmBtnText=t.customConfirmBtnText:e.customConfirmBtnText=e.DEFAULT_BTN_CONFIRM_TEXT,void 0!==t.customConfirmBtnClass?e.customConfirmBtnClass=t.customConfirmBtnClass:e.customConfirmBtnClass="",void 0!==t.onConfirm&&null!==t.onConfirm?e.onConfirm=t.onConfirm:e.onConfirm=null,void 0!==t.disableOverlayClick?e.disableOverlayClick=t.disableOverlayClick:e.disableOverlayClick=!1,void 0!==t.hideAllButton?e.hideAllButton=t.hideAllButton:e.hideAllButton=!1,void 0!==t.showXclose?e.showXclose=t.showXclose:e.showXclose=!1,void 0!==t.onOpen?e.onOpen=t.onOpen:e.onOpen=null,null!==e.onOpen&&e.onOpen())}}}},325:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(22),a=function(t){return t&&t.__esModule?t:{default:t}}(n),i=s(133);e.default={store:a.default,router:i.router,mounted:function(){}}},326:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(173),i=n(a),o=s(572),r=n(o);e.default={props:{id:String,name:String,className:String,classes:{type:Object,default:function(){return{wrapper:!1,input:!1,list:!1,item:!1}}},placeholder:String,required:Boolean,initValue:{type:String,default:""},options:Array,filterByAnchor:{type:Boolean,default:!0},anchor:{type:String,required:!0},label:String,debounce:Number,url:{type:String,required:!0},param:{type:String,default:"q"},encodeParams:{type:Boolean,default:!0},customParams:Object,customHeaders:Object,min:{type:Number,default:0},onShouldRenderChild:Function,process:Function,onInput:Function,onShow:Function,onBlur:Function,onHide:Function,onFocus:Function,onSelect:Function,onBeforeAjax:Function,onAjaxProgress:Function,onAjaxLoaded:Function,onShouldGetData:Function},data:function(){return{showList:!1,type:"",json:[],focusList:"",debounceTask:void 0}},watch:{options:function(t,e){if(this.filterByAnchor){var s=this.type,n=this.anchor,a=new RegExp(""+s,"i"),i=t.filter(function(t){return-1!==t[n].search(a)});this.json=i}else this.json=t},type:function(t){this.$emit("input",t)}},methods:{getClassName:function(t){var e=this.classes,s=this.className;return e[t]?""+e[t]:s?s+"-"+t:""},clearInput:function(){this.showList=!1,this.type="",this.json=[],this.focusList=""},cleanUp:function(t){return JSON.parse((0,r.default)(t))},handleInput:function(t){var e=this,s=t.target.value;if(this.showList=!0,this.onInput&&this.onInput(s),!this.debounce)return this.getData(s);void 0!==this.debounceTask&&clearTimeout(this.debounceTask),this.debounceTask=setTimeout(function(){return e.getData(s)},this.debounce)},handleKeyDown:function(t){var e=t.keyCode;if(this.showList){switch(e){case 40:t.preventDefault(),this.focusList++;break;case 38:t.preventDefault(),this.focusList--;break;case 13:t.preventDefault(),this.selectList(this.json[this.focusList]),this.showList=!1;break;case 27:this.showList=!1}var s=this.json.length-1,n=this.focusList>s,a=this.focusList<0,i=s,o=this.focusList;n&&(o=0),a&&(o=i),this.focusList=o}},setValue:function(t){this.type=t},handleDoubleClick:function(){this.json=[],this.getData(""),this.onShow&&this.onShow(),this.showList=!0},handleBlur:function(t){var e=this;this.onBlur&&this.onBlur(t),setTimeout(function(){e.onHide&&e.onHide(),e.showList=!1},250)},handleFocus:function(t){this.focusList=0,this.onFocus&&this.onFocus(t)},mousemove:function(t){this.focusList=t},activeClass:function(t){return t===this.focusList?"focus-list":""},selectList:function(t){var e=this.cleanUp(t);this.type=e[this.anchor],this.showList=!1,this.onSelect&&this.onSelect(e)},deepValue:function(t,e){for(var s=e.split("."),n=0;n<s.length;n++)t=t[s[n]];return t},composeParams:function(t){var e=this,s=function(t){return e.encodeParams?encodeURIComponent(t):t},n=this.param+"="+s(t);return this.customParams&&(0,i.default)(this.customParams).forEach(function(t){n+="&"+t+"="+s(e.customParams[t])}),n},composeHeader:function(t){var e=this;this.customHeaders&&(0,i.default)(this.customHeaders).forEach(function(s){t.setRequestHeader(s,e.customHeaders[s])})},doAjax:function(t){var e=this;this.onBeforeAjax&&this.onBeforeAjax(t);var s=this.composeParams(t),n=new XMLHttpRequest;n.open("GET",this.url+"?"+s,!0),this.composeHeader(n),n.addEventListener("progress",function(t){t.lengthComputable&&e.onAjaxProgress&&e.onAjaxProgress(t)}),n.addEventListener("loadend",function(t){var s=t.target.responseText,n=JSON.parse(s);e.onAjaxLoaded&&e.onAjaxLoaded(n),e.json=e.process?e.process(n):n}),n.send()},getData:function(t){t.length<this.min||!this.url||(this.onShouldGetData?this.manualGetData(t):this.doAjax(t))},manualGetData:function(t){var e=this,s=this.onShouldGetData(t);if(s&&s.then)return s.then(function(t){e.json=t})}},created:function(){this.type=this.initValue?this.initValue:null},mounted:function(){this.required&&this.$refs.input.setAttribute("required",this.required)}}},327:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(85),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={name:"Layout",data:function(){return{}},computed:{user:function(){return this.$store.state.auth.user}},components:{Simplert:a.default},methods:{showAlert:function(t){var e={title:"Внимание",message:t,type:"warning",customCloseBtnClass:"btn btn-default"};this.$refs.alert.openSimplert(e)}},mounted:function(){var t=this;this.$store.subscribe(function(e){"SHOW_ALERT"===e.type&&t.showAlert(e.payload)})}}},328:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(55),i=n(a),o=s(635),r=n(o),l=s(657),u=n(l),c=s(1),d=n(c);e.default={name:"Client-component",props:{value:Object,hasKids:{type:Boolean,default:!0}},data:function(){return{authHeaders:{Authorization:"Bearer "+localStorage.getItem("id_token")},searchUrl:"http://sol-nu.ru/api/clients/search",clientType:null,wasInputData:{},clientInfo:{}}},components:{Autocomplete:r.default,MaskedInput:u.default},methods:{formIsValid:function(){return this.isCorrect("name")&&this.isCorrect("phone")},hasError:function(t){if(this.clientInfo.hasOwnProperty(t)&&null!==this.clientInfo[t])switch(t){case"name":if(""===this.clientInfo[t])return!0;break;case"phone":if(this.wasInput("phone")&&this.clientInfo.phoneRaw.indexOf("_")>-1)return!0;break;case"email":if(this.wasInput("email")){return!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.clientInfo.email)}return!1;case"dob":if(this.wasInput("dob")){console.log(this.clientInfo.dob);var e=(0,d.default)(this.clientInfo.dob,"DD.MM.YYYY");return console.log(e),!e.isValid()}return!1}return!1},initCustomer:function(t){this.clientInfo=(0,i.default)({},t,{is_free:1,visitComment:null}),this.clientType="new",this.clientInfo.phoneRaw=this.clientInfo.phone,this.$emit("input",this.clientInfo)},isCorrect:function(t){switch(t){case"name":if(!this.clientInfo[t])return!1;if(""!==this.clientInfo[t])return!0;break;case"phone":if(this.wasInput("phone")&&-1===this.clientInfo.phoneRaw.indexOf("_"))return!0}return!1},resetUser:function(){this.clientInfo={name:null,dob:null,phone:null,phoneRaw:null,email:null,kids:"0",visitComment:null},this.clientType=null,this.$emit("input",this.clientInfo)},watchInputData:function(){this.$emit("input",this.clientInfo)},wasInput:function(t){return this.wasInputData.hasOwnProperty(t)}},watch:{value:function(t){t||this.resetUser()}},mounted:function(){this.clientInfo=this.value}}},329:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(55),i=n(a),o=s(7),r=(n(o),s(50)),l=n(r),u=s(85),c=(n(u),s(134)),d=n(c),f=s(127),m=s(1);n(m);e.default={name:"Clients-page",data:function(){return{}},components:{VLayout:l.default},computed:(0,i.default)({},(0,f.mapState)({clients:function(t){return t.clients.list}})),methods:{deleteClient:function(t){d.default.deleteClient(t.id).then(function(e){console.log(e),e.data.success?t.is_deleted=!0:alert("Ошибка удаления")}).catch(function(){alert("Ошибка удаления")})},editClient:function(t){}}}},330:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Index-page",data:function(){return{}},computed:{user:function(){return this.$store.state.auth.user}}}},331:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(88),i=n(a),o=s(50),r=n(o);e.default={name:"Login-page",data:function(){return{user:{login:null,password:null}}},components:{VLayout:r.default},methods:{login:function(t){i.default.login(t)}}}},332:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(55),i=n(a),o=s(7),r=(n(o),s(50)),l=n(r),u=s(85),c=(n(u),s(89)),d=n(c),f=s(127),m=s(1),h=n(m),p=s(126),v=n(p);e.default={name:"Sell-history-page",data:function(){return{chosenDate:new Date}},components:{VLayout:l.default,Datepicker:v.default},computed:(0,i.default)({},(0,f.mapState)({orders:function(t){return t.pos.orders}})),methods:{deleteOrder:function(t){d.default.deleteOrder(t).then(function(e){console.log(e),e.data.success?t.is_deleted=!0:alert("Ошибка удаления")}).catch(function(){alert("Ошибка удаления")})},selectDate:function(t){d.default.getOrders({filters:{date:(0,h.default)(t).format("YYYY-MM-DD")}})}}}},333:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(55),i=n(a),o=s(173),r=n(o),l=s(7),u=n(l),c=s(50),d=n(c),f=s(85),m=n(f),h=s(89),p=n(h),v=s(302),_=n(v);e.default={name:"Sell-page",data:function(){return{orderLines:{},clientInfo:{},clientIsValid:!1,currentOrder:null}},components:{VLayout:d.default,Simplert:m.default,ClientChooser:_.default},computed:{categories:function(){return this.$store.state.pos.categories},countOrderLines:function(){return(0,r.default)(this.orderLines).length},total:function(){for(var t=0,e=(0,r.default)(this.orderLines),s=0;s<e.length;s++)t+=this.orderLines[e[s]].total;return t},totalDiscount:function(){for(var t=0,e=(0,r.default)(this.orderLines),s=0;s<e.length;s++)t+=this.orderLines[e[s]].qty*this.orderLines[e[s]].price;return t-this.total}},methods:{addToCart:function(t){if(this.orderLines.hasOwnProperty(t.id))return this.incrementLineQty(this.orderLines[t.id]);var e={product:t,qty:1,price:t.price,discount_perc:0,total:t.price};return u.default.set(this.orderLines,t.id,e),!0},confirmDeleteLine:function(t){var e=this,s={title:"Удалить?",message:"Удалить товар из списка покупок",type:"warning",customCloseBtnText:"Ой, нет (",customCloseBtnClass:"btn btn-default",useConfirmBtn:!0,customConfirmBtnText:"Да",customConfirmBtnClass:"btn btn-danger",onConfirm:function(){e.deleteLine(t)}};this.$refs.deleteProduct.openSimplert(s)},decrementLineDiscount:function(t){t.discount_perc>0&&(t.discount_perc-=1,this.recalcLine(t))},decrementLineQty:function(t){t.qty>1?(t.qty-=1,this.recalcLine(t)):1===t.qty&&this.confirmDeleteLine(t.product.id)},deleteLine:function(t){console.log("DELETE LINE"),u.default.delete(this.orderLines,t)},deleteOrder:function(){var t=this,e={title:"Удалить продажу?",message:"Вы собираетесь удалить только что созданный заказ",type:"warning",customCloseBtnText:"Ой, отменяем (",customCloseBtnClass:"btn btn-default",useConfirmBtn:!0,customConfirmBtnText:"Да-да",customConfirmBtnClass:"btn btn-danger",onConfirm:function(){p.default.deleteOrder(t.order).then(function(){t.makeNewOrder()})}};this.$refs.deleteProduct.openSimplert(e)},incrementLineDiscount:function(t){t.discount_perc+=1,this.recalcLine(t)},incrementLineQty:function(t){t.qty+=1,this.recalcLine(t)},makeNewOrder:function(){this.orderLines={},this.order=null,this.clientInfo={}},recalcLine:function(t){t.total=t.product.price*t.qty,t.total-=Math.round(t.total/100*t.discount_perc,0)},submitOrder:function(){var t=this;this.clientInfo.hasOwnProperty("name")&&this.clientInfo.name&&this.clientInfo.hasOwnProperty("phoneRaw")&&-1===this.clientInfo.phoneRaw.indexOf("_")&&p.default.submitOrder({total:this.total,total_discount:this.totalDiscount,lines:this.orderLines,clientInfo:(0,i.default)({},this.clientInfo,{phone:this.clientInfo.phoneRaw,id:this.clientInfo.id?this.clientInfo.id:null})}).then(function(e){t.order=e.data.data,t.clientInfo=null;var s={title:"Продажа завершена",message:"Что делаем дальше?",type:"success",customCloseBtnText:"Отменить продажу",customCloseBtnClass:"btn btn-danger",useConfirmBtn:!0,customConfirmBtnText:"Ok",customConfirmBtnClass:"btn btn-success",onConfirm:function(){t.makeNewOrder()},onClose:function(){t.deleteOrder()}};t.$refs.deleteProduct.openSimplert(s)}).catch(function(t){console.log(t)})}}}},334:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(55),i=n(a),o=s(90),r=n(o),l=s(1),u=n(l),c=s(50),d=n(c),f=s(302),m=n(f);u.default.locale("ru"),e.default={name:"Default-page",data:function(){return{hoverDateInfo:null,dummyDate:{leftCapacity:0},months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthOffset:0,dateFromRoute:!0,chosenDate:null,chosenTime:null,timeInfo:null,dateInfo:null,availableTimes:[],userInfo:{name:null,dob:null,phone:null,kids:"0",kidsAfter7:"0",adults:"1",visitComment:null,is_free:0}}},components:{VLayout:d.default,ClientChooser:m.default},computed:{departmentInfo:function(){return this.$store.state.schedule.currentDepartment},masterInfo:function(){return this.$store.state.schedule.currentMaster},chosenFullDate:function(){return(0,u.default)(this.chosenDate).format("D MMMM, dddd")},availableDates:function(){return this.$store.state.schedule.datesArray},nowDate:function(){var t=new Date;if(0!==this.monthOffset){var e=t.getMonth()+this.monthOffset;t.setMonth(e)}return t},thisYear:function(){return this.nowDate.getFullYear()},thisMonthName:function(){return this.months[this.nowDate.getMonth()]},firstDayThisMonthWeekDay:function(){return this.nowDate.setDate(1),0===this.nowDate.getDay()?6:this.nowDate.getDay()-1},lastDayThisMonth:function(){return this.nowDate.setMonth(this.nowDate.getMonth()+1),this.nowDate.setDate(0),this.nowDate.getDate()},nextMonthAvailable:function(){return!0},thisMonthAvailable:function(){return!0},prevMonthAvailable:function(){return!0}},methods:{chooseDate:function(t){this.chosenTime=null,this.timeInfo=null;var e=this.nowDate;e.setDate(t);var s=(0,u.default)(e);this.$router.push({name:"schedule",params:{masterId:this.masterInfo.id,date:s.format("YYYY-MM-DD")}})},chooseTime:function(t,e){this.chosenTime=e,this.timeInfo=t},formIsValid:function(){return this.isCorrect("name")&&this.isCorrect("phone")&&this.chosenTime},getDateInfo:function(t){if(!this.availableDates)return this.dummyDate;var e=this.nowDate;e.setDate(t);var s=(0,u.default)(e),n=s.format("YYYY-MM-DD");return this.availableDates.hasOwnProperty(n)?this.availableDates[n]:this.dummyDate},goToDetails:function(){this.$router.push({name:"details",params:{departmentId:this.departmentInfo.id,masterId:this.masterInfo.id,date:this.chosenDate,time:this.chosenTime}})},gotoTimeTable:function(){this.$router.push({name:"timetable",params:{date:this.chosenDate,departmentId:this.departmentInfo.id}})},hoverDay:function(t){this.hoverDateInfo=this.getDateInfo(t)},initDate:function(){this.availableDates&&this.chosenDate&&this.availableDates.hasOwnProperty(this.chosenDate)&&(this.availableTimes=this.availableDates[this.chosenDate].times,this.dateInfo=this.availableDates[this.chosenDate])},initDateFromRoute:function(){if(this.$route.params.date&&this.dateFromRoute){console.log("init date from route"),this.chosenDate=this.$route.params.date;var t=new Date,e=t.getMonth(),s=(0,u.default)(this.chosenDate).get("month");this.monthOffset=s-e,this.initDate(),this.dateFromRoute=!1}this.$route.params.time&&(this.chosenTime=this.$route.params.time)},isCorrect:function(t){switch(t){case"name":if(!this.userInfo[t])return!1;if(""!==this.userInfo[t])return!0;break;case"phone":if(this.userInfo&&this.userInfo.hasOwnProperty("phoneRaw")&&-1===this.userInfo.phoneRaw.indexOf("_"))return!0;break;case"email":if(""===this.userInfo.email||null===this.userInfo.email)return!0;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.userInfo.email);case"dob":if(""===this.userInfo.dob||null===this.userInfo.dob)return!0;if((0,u.default)(this.userInfo.dob,"DD.MM.YYYY").isValid())return!0}return!1},isDateAvailable:function(t){if(!this.availableDates)return!1;var e=this.nowDate;e.setDate(t);var s=(0,u.default)(e),n=s.format("YYYY-MM-DD");return!!this.availableDates.hasOwnProperty(n)},isChosenDate:function(t){var e=this.nowDate;return e.setDate(t),(0,u.default)(e).format("YYYY-MM-DD")===this.chosenDate},moveNextMonth:function(){this.chosenDate=null,this.chosenTime=null,this.timeInfo=null,this.monthOffset+=1;var t=new Date;if(0!==this.monthOffset){var e=t.getMonth()+this.monthOffset;t.setMonth(e)}r.default.getDates(this.departmentInfo.id,this.masterInfo.id,(0,u.default)(t).format("YYYY-MM-DD"))},movePrevMonth:function(){this.chosenDate=null,this.chosenTime=null,this.timeInfo=null,this.monthOffset-=1;var t=new Date;if(0!==this.monthOffset){var e=t.getMonth()+this.monthOffset;t.setMonth(e)}r.default.getDates(this.departmentInfo.id,this.masterInfo.id,(0,u.default)(t).format("YYYY-MM-DD"))},resetHoverDay:function(){this.hoverDateInfo=null},submitForm:function(){var t=this;this.$emit("input",this.value),this.formIsValid()?r.default.sendAppointment((0,i.default)({},this.userInfo,{phone:this.userInfo.phoneRaw,clientId:this.userInfo.id?this.userInfo.id:null,departmentId:this.departmentInfo.id,masterId:this.masterInfo.id,chosenDate:this.chosenDate,chosenTime:this.chosenTime})).then(function(e){t.gotoTimeTable()}).catch(function(t){console.log(t)}):this.$store.dispatch("showAlert","Заполните данные клиента и выберите время")}},watch:{availableDates:function(t){t&&this.initDate()},$route:function(t){r.default.getDates(t.params.departmentId,t.params.masterId,t.params.date),this.dateFromRoute=!0}},mounted:function(){var t=this;this.$store.subscribe(function(e){"schedule/SET_DATES"===e.type&&t.initDateFromRoute()}),console.log("mounted"),this.initDateFromRoute()}}},335:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(90),i=n(a),o=s(1),r=n(o),l=s(126),u=n(l),c=s(174),d=n(c),f=s(50),m=n(f);r.default.updateLocale("ru",{months:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"]}),r.default.locale("ru"),e.default={name:"Timetable-page",data:function(){return{chosenDate:null,currentApptId:null,currentApptTime:null,newApptTime:"",pickerDate:null,showDatePicker:!1}},components:{ClickConfirm:d.default,Datepicker:u.default,VLayout:m.default},computed:{departmentInfo:function(){return this.$store.state.schedule.currentDepartment},timeTable:function(){return this.$store.state.schedule.timeTable},chosenFullDate:function(){return(0,r.default)(this.chosenDate).format("D MMMM, dddd")},nowDate:function(){return this.chosenDate?(0,r.default)(this.chosenDate):new Date},thisYear:function(){return this.nowDate.getFullYear()},thisMonthName:function(){return this.months[this.nowDate.getMonth()]}},methods:{deleteAppointment:function(t){var e=this;i.default.deleteAppointment(t).then(function(){i.default.getTimeTable(e.departmentInfo.id,e.chosenDate)}).catch(function(t){console.error(t)})},hideDatePicker:function(){this.showDatePicker&&(this.showDatePicker=!1)},initDateFromRoute:function(){this.$route.params.date&&(this.chosenDate=this.$route.params.date)},moveAppointment:function(){i.default.saveAppointment(this.currentApptId,{visit_time:this.newApptTime}),this.currentApptId=null,this.currentApptTime=null,this.newApptTime=""},selectDate:function(t){i.default.getTimeTable(this.departmentInfo.id,(0,r.default)(t).format("YYYY-MM-DD"))},showTransferModal:function(t,e){this.currentApptId=t,this.currentApptTime=e,this.$root.$emit("show::modal","transferModal")}},watch:{$route:function(t){this.initDateFromRoute(),i.default.getTimeTable(t.params.departmentId,t.params.date)}},mounted:function(){this.initDateFromRoute()}}},336:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(577),i=n(a),o=s(55),r=n(o),l=s(576),u=n(l),c=s(1),d=n(c),f=s(126),m=n(f),h=s(50),p=n(h),v=s(7),_=n(v),b=s(174),C=n(b);d.default.updateLocale("ru",{months:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"]}),d.default.locale("ru"),e.default={name:"Worklog-page",data:function(){return{list:{data:[],meta:null},form:{hrs:10,work_date:new Date,user_id:null},filters:{start_date:(0,d.default)().subtract(1,"months").toDate(),end_date:new Date,user_id:null}}},components:{Datepicker:m.default,VLayout:p.default,ClickConfirm:C.default},computed:{chosenFullDate:function(){return(0,d.default)(this.chosenDate).format("D MMMM, dddd")},nowDate:function(){return this.chosenDate?(0,d.default)(this.chosenDate):new Date},thisYear:function(){return this.nowDate.getFullYear()},thisMonthName:function(){return this.months[this.nowDate.getMonth()]}},methods:{submit:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(i.default.mark(function t(){var e,s;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(this.form),this.form.user_id){t.next=4;break}return this.$store.dispatch("showAlert","Не выбран сотрудник"),t.abrupt("return");case 4:return e=(0,r.default)({},this.form,{work_date:(0,d.default)(this.form.work_date).format("YYYY-MM-DD")}),t.next=7,_.default.$http.post("/worklogs",e);case 7:return s=t.sent,t.next=10,this.refresh();case 10:case"end":return t.stop()}},t,this)}));return t}(),deleteRow:function(){function t(t){return e.apply(this,arguments)}var e=(0,u.default)(i.default.mark(function t(e){var s,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=this.list.data[e],t.next=3,_.default.$http.delete("/worklogs/"+s.id);case 3:if(n=t.sent,!n.data.success){t.next=8;break}return this.$delete(this.list.data,e),t.next=8,this.refresh();case 8:case"end":return t.stop()}},t,this)}));return t}(),refresh:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(i.default.mark(function t(){var e,s;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={start_date:(0,d.default)(this.filters.start_date).format("YYYY-MM-DD"),end_date:(0,d.default)(this.filters.end_date).format("YYYY-MM-DD"),user_id:this.filters.user_id},t.next=3,_.default.$http.get("/worklogs",{params:e});case 3:s=t.sent,this.list=s.data;case 5:case"end":return t.stop()}},t,this)}));return t}()},watch:{},mounted:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refresh();case 2:case"end":return t.stop()}},t,this)}));return t}()}},337:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(90),i=n(a),o=s(89),r=n(o),l=s(134),u=n(l),c=s(88),d=n(c),f=s(1),m=n(f);e.default=[{path:"/schedule/:departmentId/:masterId?/:date?/:time?",name:"schedule",component:s(303),beforeEnter:function(t,e,s){var n=t.params.hasOwnProperty("date")?t.params.date:null;i.default.getDates(t.params.departmentId,t.params.masterId,n),s()},meta:{auth:!0}},{path:"/clients",name:"clients",component:s(636),beforeEnter:function(t,e,s){u.default.getClients(),s()},meta:{auth:!0,is_admin:!0}},{path:"/details/:departmentId/:masterId?/:date?/:time?",name:"details",component:s(303),beforeEnter:function(t,e,s){i.default.getDates(t.params.departmentId,t.params.masterId),s()},meta:{auth:!0}},{path:"/login",name:"login",component:s(638),meta:{guest:!0}},{path:"/logout",name:"logout",beforeEnter:function(t,e,s){d.default.logout(),s()},meta:{auth:!0}},{path:"/pos",name:"pos",component:s(640),beforeEnter:function(t,e,s){r.default.getCategories(),s()},meta:{auth:!0}},{path:"/pos-history",name:"pos-history",component:s(639),beforeEnter:function(t,e,s){r.default.getOrders({filters:{date:(0,m.default)().format("YYYY-MM-DD")}}),s()},meta:{auth:!0,is_admin:!0}},{path:"/timetable/:departmentId/:date",name:"timetable",component:s(641),beforeEnter:function(t,e,s){i.default.getTimeTable(t.params.departmentId,t.params.date),s()},meta:{auth:!0}},{path:"/worklog",name:"worklog",component:s(642),beforeEnter:function(t,e,s){s()},meta:{auth:!0}},{path:"/",name:"home",component:s(637),meta:{auth:!0}},{path:"/*",redirect:"/",meta:{auth:!0}}]},338:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){t.success?(console.log("data",t),r.default.dispatch("auth/login",t.data.token),r.default.dispatch("auth/setUser",t.data.user),i.default.router.push({name:"home"})):r.default.dispatch("showAlert",t.message)},u=function(t){console.log(t)};e.default=function(t){i.default.$http.post("/auth/login",t).then(function(t){l(t.data)}).catch(function(t){u(t)})}},339:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o);e.default=function(){r.default.dispatch("auth/logout"),i.default.router.push({name:"login"})}},340:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){t.success&&(console.log("data",t),r.default.dispatch("auth/setUser",t.data))},u=function(t){console.log(t)};e.default=function(){i.default.$http.get("/auth/getUser").then(function(t){l(t.data)}).catch(function(t){u(t)})}},341:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){return a.default.$http.delete("clients/"+t)}},342:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){r.default.dispatch("clients/setList",t)},u=function(t){r.default.dispatch("commonError",t)};e.default=function(){i.default.$http.get("clients").then(function(t){l(t.data)}).catch(function(t){u(t)})}},343:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t,e){return a.default.$http.put("clients/"+t,e)}},344:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){return a.default.$http.delete("orders/"+t.id)}},345:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){r.default.dispatch("pos/setCategories",t.data)},u=function(t){r.default.dispatch("commonError",t)};e.default=function(){i.default.$http.get("products").then(function(t){l(t.data)}).catch(function(t){u(t)})}},346:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){r.default.dispatch("pos/setOrders",t.data)},u=function(t){r.default.dispatch("commonError",t)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.default.$http.get("orders",{params:t}).then(function(t){l(t.data)}).catch(function(t){u(t)})}},347:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){return a.default.$http.post("orders",t)}},348:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){return a.default.$http.delete("appointments/"+t)}},349:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){r.default.dispatch("schedule/setDates",t.data.dates),r.default.dispatch("schedule/setDepartment",t.data.department)},u=function(t){r.default.dispatch("commonError",t)};e.default=function(t,e,s){var n=void 0;n=e&&parseInt(e,10)>0?"masters/dates/"+e:"departments/dates/"+t,s&&(n+="/"+s),i.default.$http.get(n).then(function(t){l(t.data)}).catch(function(t){u(t)})}},350:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){r.default.dispatch("schedule/setTimeTable",t.data.timeTable),r.default.dispatch("schedule/setDepartment",t.data.department)},u=function(t){r.default.dispatch("commonError",t)};e.default=function(t,e){i.default.$http.get("appointments",{params:{departmentId:t,date:e}}).then(function(t){l(t.data)}).catch(function(t){u(t)})}},351:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),i=n(a),o=s(22),r=n(o),l=function(t){r.default.dispatch("schedule/setTimeTable",t.data.timeTable),r.default.dispatch("schedule/setDepartment",t.data.department)},u=function(t){r.default.dispatch("commonError",t)};e.default=function(t,e){i.default.$http.put("appointments/"+t,e).then(function(t){l(t.data)}).catch(function(t){u(t)})}},352:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(7),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t){return a.default.$http.post("appointments",t)}},353:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showAlert=e.commonError=void 0;var n=s(371),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(n);e.commonError=function(t,e){t.commit;console.error("ERROR"),console.error(e)},e.showAlert=function(t,e){(0,t.commit)(a.SHOW_ALERT,e)}},354:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setUser=e.logout=e.login=e.check=void 0;var n=s(135),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(n),i=e.check=function(t){(0,t.commit)(a.CHECK)},o=e.login=function(t,e){(0,t.commit)(a.LOGIN,e)},r=e.logout=function(t){(0,t.commit)(a.LOGOUT)},l=e.setUser=function(t,e){(0,t.commit)(a.SET_USER,e)};e.default={check:i,login:o,logout:r,setUser:l}},355:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},356:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(354),i=n(a),o=s(355),r=n(o),l=s(357),u=n(l),c=s(358),d=n(c);e.default={namespaced:!0,actions:i.default,getters:r.default,mutations:u.default,state:d.default}},357:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a,i=s(79),o=n(i),r=s(7),l=n(r),u=s(135);e.default=(a={},(0,o.default)(a,u.CHECK,function(t){t.authenticated=!!localStorage.getItem("id_token"),t.authenticated&&(l.default.$http.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("id_token"))}),(0,o.default)(a,u.LOGIN,function(t,e){t.authenticated=!0,localStorage.setItem("id_token",e),l.default.$http.defaults.headers.common.Authorization="Bearer "+e}),(0,o.default)(a,u.LOGOUT,function(t){t.authenticated=!1,localStorage.removeItem("id_token"),l.default.$http.defaults.headers.common.Authorization=""}),(0,o.default)(a,u.SET_USER,function(t,e){t.user=e}),a)},358:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={authenticated:!1,user:null}},359:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setList=void 0;var n=s(136),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(n);e.setList=function(t,e){(0,t.commit)(a.SET_LIST,e)}},360:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(362),i=n(a),o=s(361),r=n(o),l=s(359),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(l);e.default={namespaced:!0,state:i.default,mutations:r.default,actions:u}},361:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(79),a=function(t){return t&&t.__esModule?t:{default:t}}(n),i=s(136);e.default=(0,a.default)({},i.SET_LIST,function(t,e){t.list=e})},362:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={list:{}}},363:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setOrders=e.setCategories=void 0;var n=s(137),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(n);e.setCategories=function(t,e){(0,t.commit)(a.SET_CATEGORIES,e)},e.setOrders=function(t,e){(0,t.commit)(a.SET_ORDERS,e)}},364:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(366),i=n(a),o=s(365),r=n(o),l=s(363),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(l);e.default={namespaced:!0,state:i.default,mutations:r.default,actions:u}},365:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=s(79),i=function(t){return t&&t.__esModule?t:{default:t}}(a),o=s(137);e.default=(n={},(0,i.default)(n,o.SET_CATEGORIES,function(t,e){t.categories=e}),(0,i.default)(n,o.SET_ORDERS,function(t,e){t.orders=e}),n)},366:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={categories:[],orders:{}}},367:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setTimeTable=e.setMaster=e.setDepartment=e.setDates=void 0;var n=s(138),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(n);e.setDates=function(t,e){(0,t.commit)(a.SET_DATES,e)},e.setDepartment=function(t,e){(0,t.commit)(a.SET_DEPARTMENT,e)},e.setMaster=function(t,e){(0,t.commit)(a.SET_MASTER,e)},e.setTimeTable=function(t,e){(0,t.commit)(a.SET_TIMETABLE,e)}},368:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(370),i=n(a),o=s(369),r=n(o),l=s(367),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(l);e.default={namespaced:!0,state:i.default,mutations:r.default,actions:u}},369:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=s(79),i=function(t){return t&&t.__esModule?t:{default:t}}(a),o=s(138);e.default=(n={},(0,i.default)(n,o.SET_DATES,function(t,e){t.datesArray=e}),(0,i.default)(n,o.SET_DEPARTMENT,function(t,e){t.currentDepartment=e}),(0,i.default)(n,o.SET_MASTER,function(t,e){t.currentMaster=e}),(0,i.default)(n,o.SET_TIMETABLE,function(t,e){t.timeTable=e}),n)},370:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={datesArray:null,currentDepartment:null,currentMaster:{id:0},timeTable:null}},371:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.SHOW_ALERT="SHOW_ALERT";e.default={SHOW_ALERT:n}},50:function(t,e,s){s(624);var n=s(17)(s(327),s(649),null,null);t.exports=n.exports},621:function(t,e){},622:function(t,e){},623:function(t,e){},624:function(t,e){},625:function(t,e){},626:function(t,e){},627:function(t,e){},630:function(t,e,s){function n(t){return s(a(t))}function a(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./af":186,"./af.js":186,"./ar":193,"./ar-dz":187,"./ar-dz.js":187,"./ar-kw":188,"./ar-kw.js":188,"./ar-ly":189,"./ar-ly.js":189,"./ar-ma":190,"./ar-ma.js":190,"./ar-sa":191,"./ar-sa.js":191,"./ar-tn":192,"./ar-tn.js":192,"./ar.js":193,"./az":194,"./az.js":194,"./be":195,"./be.js":195,"./bg":196,"./bg.js":196,"./bn":197,"./bn.js":197,"./bo":198,"./bo.js":198,"./br":199,"./br.js":199,"./bs":200,"./bs.js":200,"./ca":201,"./ca.js":201,"./cs":202,"./cs.js":202,"./cv":203,"./cv.js":203,"./cy":204,"./cy.js":204,"./da":205,"./da.js":205,"./de":208,"./de-at":206,"./de-at.js":206,"./de-ch":207,"./de-ch.js":207,"./de.js":208,"./dv":209,"./dv.js":209,"./el":210,"./el.js":210,"./en-au":211,"./en-au.js":211,"./en-ca":212,"./en-ca.js":212,"./en-gb":213,"./en-gb.js":213,"./en-ie":214,"./en-ie.js":214,"./en-nz":215,"./en-nz.js":215,"./eo":216,"./eo.js":216,"./es":218,"./es-do":217,"./es-do.js":217,"./es.js":218,"./et":219,"./et.js":219,"./eu":220,"./eu.js":220,"./fa":221,"./fa.js":221,"./fi":222,"./fi.js":222,"./fo":223,"./fo.js":223,"./fr":226,"./fr-ca":224,"./fr-ca.js":224,"./fr-ch":225,"./fr-ch.js":225,"./fr.js":226,"./fy":227,"./fy.js":227,"./gd":228,"./gd.js":228,"./gl":229,"./gl.js":229,"./gom-latn":230,"./gom-latn.js":230,"./he":231,"./he.js":231,"./hi":232,"./hi.js":232,"./hr":233,"./hr.js":233,"./hu":234,"./hu.js":234,"./hy-am":235,"./hy-am.js":235,"./id":236,"./id.js":236,"./is":237,"./is.js":237,"./it":238,"./it.js":238,"./ja":239,"./ja.js":239,"./jv":240,"./jv.js":240,"./ka":241,"./ka.js":241,"./kk":242,"./kk.js":242,"./km":243,"./km.js":243,"./kn":244,"./kn.js":244,"./ko":245,"./ko.js":245,"./ky":246,"./ky.js":246,"./lb":247,"./lb.js":247,"./lo":248,"./lo.js":248,"./lt":249,"./lt.js":249,"./lv":250,"./lv.js":250,"./me":251,"./me.js":251,"./mi":252,"./mi.js":252,"./mk":253,"./mk.js":253,"./ml":254,"./ml.js":254,"./mr":255,"./mr.js":255,"./ms":257,"./ms-my":256,"./ms-my.js":256,"./ms.js":257,"./my":258,"./my.js":258,"./nb":259,"./nb.js":259,"./ne":260,"./ne.js":260,"./nl":262,"./nl-be":261,"./nl-be.js":261,"./nl.js":262,"./nn":263,"./nn.js":263,"./pa-in":264,"./pa-in.js":264,"./pl":265,"./pl.js":265,"./pt":267,"./pt-br":266,"./pt-br.js":266,"./pt.js":267,"./ro":268,"./ro.js":268,"./ru":269,"./ru.js":269,"./sd":270,"./sd.js":270,"./se":271,"./se.js":271,"./si":272,"./si.js":272,"./sk":273,"./sk.js":273,"./sl":274,"./sl.js":274,"./sq":275,"./sq.js":275,"./sr":277,"./sr-cyrl":276,"./sr-cyrl.js":276,"./sr.js":277,"./ss":278,"./ss.js":278,"./sv":279,"./sv.js":279,"./sw":280,"./sw.js":280,"./ta":281,"./ta.js":281,"./te":282,"./te.js":282,"./tet":283,"./tet.js":283,"./th":284,"./th.js":284,"./tl-ph":285,"./tl-ph.js":285,"./tlh":286,"./tlh.js":286,"./tr":287,"./tr.js":287,"./tzl":288,"./tzl.js":288,"./tzm":290,"./tzm-latn":289,"./tzm-latn.js":289,"./tzm.js":290,"./uk":291,"./uk.js":291,"./ur":292,"./ur.js":292,"./uz":294,"./uz-latn":293,"./uz-latn.js":293,"./uz.js":294,"./vi":295,"./vi.js":295,"./x-pseudo":296,"./x-pseudo.js":296,"./yo":297,"./yo.js":297,"./zh-cn":298,"./zh-cn.js":298,"./zh-hk":299,"./zh-hk.js":299,"./zh-tw":300,"./zh-tw.js":300};n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id=630},633:function(t,e,s){s(625);var n=s(17)(s(324),s(651),null,null);t.exports=n.exports},634:function(t,e,s){var n=s(17)(s(325),s(646),null,null);t.exports=n.exports},635:function(t,e,s){var n=s(17)(s(326),s(650),null,null);t.exports=n.exports},636:function(t,e,s){s(627);var n=s(17)(s(329),s(654),null,null);t.exports=n.exports},637:function(t,e,s){var n=s(17)(s(330),s(647),null,null);t.exports=n.exports},638:function(t,e,s){var n=s(17)(s(331),s(652),null,null);t.exports=n.exports},639:function(t,e,s){s(623);var n=s(17)(s(332),s(648),null,null);t.exports=n.exports},640:function(t,e,s){var n=s(17)(s(333),s(645),null,null);t.exports=n.exports},641:function(t,e,s){var n=s(17)(s(335),s(643),null,null);t.exports=n.exports},642:function(t,e,s){var n=s(17)(s(336),s(655),null,null);t.exports=n.exports},643:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("section",{staticClass:"c-booking",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md",on:{click:function(e){t.hideDatePicker()}}},[s("a",{staticClass:"btn btn-outline-black",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[s("i",{staticClass:"fa fa-backward"}),t._v(" назад")]),t._v(" "),s("h1",[t._v("Лист записи на "),s("span",{staticClass:"badge badge-info",attrs:{title:"Сменить дату"},on:{click:function(e){e.stopPropagation(),t.showDatePicker=!t.showDatePicker}}},[t._v("«"+t._s(t.chosenFullDate)+"»")])]),t._v(" "),s("datepicker",{directives:[{name:"show",rawName:"v-show",value:t.showDatePicker,expression:"showDatePicker"}],attrs:{bootstrapStyling:!0,"monday-first":!0,inline:!0,language:"ru"},on:{selected:t.selectDate},model:{value:t.chosenDate,callback:function(e){t.chosenDate=e},expression:"chosenDate"}}),t._v(" "),t._l(t.timeTable,function(e,n){return s("div",[s("h2",{staticClass:"badge badge-success",staticStyle:{"font-size":"x-large"}},[t._v(t._s(n)+" "),s("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"details",params:{departmentId:t.departmentInfo.id,masterId:0,date:t.chosenDate,time:n}},title:"Записать на это время"}},[s("i",{staticClass:"fa fa-plus-circle"})])],1),t._v(" "),s("table",{staticClass:"table table-bordered table-hover"},[s("thead",[s("tr",[s("th",{attrs:{width:"50"}},[t._v("Мест")]),t._v(" "),s("th",[t._v("Клиент")]),t._v(" "),s("th",{attrs:{width:"100"}},[t._v("Взрослых")]),t._v(" "),s("th",{attrs:{width:"150"}},[t._v("Дети до 7 лет")]),t._v(" "),s("th",{attrs:{width:"200"}},[t._v("Дети старше 7 лет")]),t._v(" "),s("th",[t._v("Комментарий")]),t._v(" "),s("th",{attrs:{colspan:"2"}},[t._v("Действия")])])]),t._v(" "),s("tbody",t._l(e,function(e){return s("tr",[s("td",{attrs:{align:"center"}},[s("h2",{staticClass:"badge badge-info",staticStyle:{"font-size":"x-large"}},[t._v(t._s(e.adults+e.kidsAfter7))])]),t._v(" "),s("th",[t._v(t._s(e.client.name))]),t._v(" "),s("td",{attrs:{align:"center"}},[s("span",{staticClass:"badge badge-warning",staticStyle:{"font-size":"large"}},[t._v(t._s(e.adults))])]),t._v(" "),s("td",{attrs:{align:"center"}},[t._v(t._s(e.kids))]),t._v(" "),s("td",{attrs:{align:"center"}},[s("span",{staticClass:"badge",class:{"badge-warning":e.kidsAfter7>0},staticStyle:{"font-size":"large"}},[t._v(t._s(e.kidsAfter7))])]),t._v(" "),s("td",[t._v(t._s(e.comment))]),t._v(" "),s("td",{staticStyle:{width:"120px"}},[s("click-confirm",{attrs:{messages:{title:"Точно удалить?",yes:"ДА",no:"Ой, нет"}}},[s("button",{staticClass:"btn btn-danger",on:{click:function(s){t.deleteAppointment(e.id)}}},[s("i",{staticClass:"fa fa-trash"}),t._v(" Удалить")])])],1),t._v(" "),s("td",{staticStyle:{width:"120px"}},[s("b-btn",{attrs:{variant:"primary"},on:{click:function(s){t.showTransferModal(e.id,n)}}},[s("i",{staticClass:"fa fa-arrows"}),t._v(" Перенести")])],1)])}))])])})],2)])]),t._v(" "),s("b-modal",{attrs:{"close-title":"Отменить операцию","ok-title":"Перенести",id:"transferModal",title:"Перенести запись"},on:{ok:t.moveAppointment}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newApptTime,expression:"newApptTime"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.newApptTime=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("-- Новое время")]),t._v(" "),t._l(t.timeTable,function(e,n){return n!=t.currentApptTime?s("option",{domProps:{value:n}},[t._v("\n        "+t._s(n)+" ( занято: "+t._s(e.length)+" )\n      ")]):t._e()})],2)])],1)])},staticRenderFns:[]}},644:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("section",{staticClass:"c-booking",class:{"has-time_selector":"schedule"==t.$route.name,"has-user_data":"schedule"!=t.$route.name},attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md b-calendar_col"},[s("div",{staticClass:"b-calendar"},[s("p",{staticClass:"title d-flex align-items-center justify-content-center"},[s("span",{staticClass:"icon-calendar"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"708.91 447 29.68 33.92"}},[s("g",{attrs:{"data-name":"Group 204",transform:"translate(504)"}},[s("path",{attrs:{"data-name":"Path 55",d:"M0 32V52.32a2.72 2.72 0 0 0 2.7 2.75H26.98a2.72 2.72 0 0 0 2.7-2.74V32ZM7.42 53.03h-5.4V47.6h5.4Zm0-6.78h-5.4V40.82h5.4Zm0-6.78h-5.4V34.03h5.4ZM14.17 53.03H8.77V47.6h5.4Zm0-6.78H8.77V40.82h5.4Zm0-6.78H8.77V34.03h5.4ZM20.91 53.03h-5.4V47.6h5.4Zm0-6.78h-5.4V40.82h5.4Zm0-6.78h-5.4V34.03h5.4ZM27.66 53.03h-5.4V47.6h5.4Zm0-6.78h-5.4V40.82h5.4Zm0-6.78h-5.4V34.03h5.4Z",transform:"translate(204.905 425.854)"}}),s("path",{attrs:{"data-name":"Path 56",d:"M26.98 4.07H22.6V1.02a1.01 1.01 0 1 0-2.02 0V4.07H9.11V1.02a1.01 1.01 0 1 0-2.02 0V4.07H2.7A2.72 2.72 0 0 0 0 6.82V9.16H0V9.5H29.68V9.16h0V6.82A2.72 2.72 0 0 0 26.98 4.07ZM8.1 8.82a2.04 2.04 0 0 1-1.01-3.8v1.76a1.01 1.01 0 1 0 2.02 0V5.02A2.04 2.04 0 0 1 8.1 8.82Zm13.49 0a2.04 2.04 0 0 1-1.01-3.8v1.76a1.01 1.01 0 1 0 2.02 0V5.02a2.04 2.04 0 0 1-1.01 3.8Z",transform:"translate(204.905 447)"}})])])]),t._v(" "),s("span",[t.departmentInfo?s("b",[t._v("«"+t._s(t.departmentInfo.title)+"» ")]):t._e(),t._v("  Запись ")])]),t._v(" "),s("p",{staticClass:"title_date hidden-md-up"},[t._v("Выберите дату")]),t._v(" "),s("div",{staticClass:"b-month_selector"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.prevMonthAvailable,expression:"prevMonthAvailable"}],staticClass:"btn-action",attrs:{type:"button"},on:{click:function(e){t.movePrevMonth()}}},[t._v("<")]),t._v(" "),s("span",{staticClass:"month"},[s("b",[t._v(t._s(t.thisMonthName)+" "+t._s(t.thisYear))])]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.nextMonthAvailable,expression:"nextMonthAvailable"}],staticClass:"btn-action",attrs:{type:"button"},on:{click:function(e){t.moveNextMonth()}}},[t._v(">")])]),t._v(" "),s("div",{staticClass:"b-date_selector clearfix"},[s("div",{staticClass:"date"},[s("span",[t._v("Пн")])]),t._v(" "),s("div",{staticClass:"date"},[s("span",[t._v("Вт")])]),t._v(" "),s("div",{staticClass:"date"},[s("span",[t._v("Ср")])]),t._v(" "),s("div",{staticClass:"date"},[s("span",[t._v("Чт")])]),t._v(" "),s("div",{staticClass:"date"},[s("span",[t._v("Пт")])]),t._v(" "),s("div",{staticClass:"date"},[s("span",[t._v("Сб")])]),t._v(" "),s("div",{staticClass:"date"},[s("span",[t._v("Вс")])]),t._v(" "),t._l(t.firstDayThisMonthWeekDay,function(e){return t.firstDayThisMonthWeekDay?s("div",{staticClass:"date"},[t._v(" ")]):t._e()}),t._v(" "),t._l(t.lastDayThisMonth,function(e){return s("div",{staticClass:"date"},[t.isDateAvailable(e)?s("button",{class:{"is-active":t.isChosenDate(e)},attrs:{type:"button"},on:{click:function(s){t.chooseDate(e)},mouseout:t.resetHoverDay,mouseover:function(s){t.hoverDay(e)}}},[t._v(t._s(e)+"            ")]):s("button",{attrs:{type:"button",disabled:""}},[t._v(t._s(e))])])})],2)])]),t._v(" "),s("div",{staticClass:"col-md b-booking_col"},[t.dateInfo?s("div",{staticClass:"alert text-center",class:{"alert-danger":t.dateInfo.capacity<=t.dateInfo.occupied,"alert-success":t.dateInfo.capacity>t.dateInfo.occupied}},[t.chosenTime&&t.chosenDate?s("h1",[t._v(t._s(t.chosenFullDate)+" @ "+t._s(t.chosenTime))]):t._e(),t._v(" "),s("strong",[t._v("Доступно для записи:")]),t._v(" "+t._s(t.dateInfo.capacity-t.dateInfo.occupied)+"."),s("br"),s("br"),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.gotoTimeTable()}}},[s("i",{staticClass:"fa fa-list"}),t._v(" Посмотреть лист записи")])]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.chosenDate,expression:"chosenDate"}],staticClass:"b-booking",class:{"has-time_selector":"schedule"==t.$route.name}},["schedule"==t.$route.name?[s("div",{staticClass:"b-time_selector",class:{"is-selected":t.chosenDate}},[s("p",{staticClass:"title"},[t._v("Выберите время на дату «"+t._s(t.chosenFullDate)+"»")]),t._v(" "),s("div",{staticClass:"l-times clearfix"},t._l(t.availableTimes,function(e,n){return s("button",{staticClass:"time",class:{"is-active":t.chosenTime==n},attrs:{type:"button"},on:{click:function(s){t.chooseTime(e,n)}}},[t._v(t._s(n)),s("br"),t._v(" "),s("span",{staticClass:"text-success"},[t._v(" Мест: "+t._s(e.available-e.occupied))])])})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.chosenTime,expression:"chosenTime"}],staticClass:"b-confirm"})]),t._v(" "),s("hr",{staticClass:"b-line_hr"}),t._v(" "),s("client-chooser",{model:{value:t.userInfo,callback:function(e){t.userInfo=e},expression:"userInfo"}}),t._v(" "),s("button",{staticClass:"btn-default btn-submit",attrs:{type:"button"},on:{click:t.submitForm}},[s("i",{staticClass:"icon-logo"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"524 1480.316 21.891 19.197"}},[s("g",{attrs:{transform:"translate(524 1480.316)"}},[s("path",{attrs:{"data-name":"Path 96",d:"M10.045,2.23A13.707,13.707,0,0,0,3.6,7.579H8.893Z",transform:"translate(-2.082 -1.195)"}}),t._v(" "),s("path",{attrs:{"data-name":"Path 97",d:"M13.008-.24a12.579,12.579,0,0,0-1.485.1l-.262,1.223L10.17,6.144h7.2l-.291,1.366-.35,1.634h-7.2L8.145,15.581H4.771l1.088-5.064.3-1.366H.258A.975.975,0,0,1,.2,9.361c-1.139,5.311,2.754,9.6,8.68,9.6S20.55,14.643,21.693,9.323,18.943-.248,13.008-.24Z",transform:"translate(-0.001 0.24)"}})])])]),t._v("Подтвердить запись")])]:t._e()],2)])])])])])},staticRenderFns:[]}},645:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("section",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[t._l(t.categories,function(e){return[s("h4",{staticClass:"sub-title space-top space-bottom"},[s("i",{class:e.icon_class}),t._v(" "+t._s(e.name))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},t._l(e.products,function(n){return s("a",{staticClass:"btn pill",class:e.product_class,staticStyle:{"margin-right":"15px"},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.addToCart(n)}}},[t._v(t._s(n.name))])}))])]})],2),t._v(" "),s("div",{staticClass:"col-md-6"},[s("h4",{directives:[{name:"show",rawName:"v-show",value:t.countOrderLines,expression:"countOrderLines"}],staticClass:"sub-title space-top space-bottom"},[t._v("Содержание чека")]),t._v(" "),s("table",{directives:[{name:"show",rawName:"v-show",value:t.countOrderLines,expression:"countOrderLines"}],staticClass:"table"},[s("thead",{staticClass:"thead-inverse"},[s("tr",[s("th",{attrs:{width:"40"}},[t._v("#")]),t._v(" "),s("th",{attrs:{width:"80%"}},[t._v("Позиция")]),t._v(" "),s("th",[t._v("Количество")]),t._v(" "),s("th",[t._v("Скидка %")]),t._v(" "),s("th",[t._v("Сумма")])])]),t._v(" "),s("tbody",t._l(t.orderLines,function(e,n,a){return s("tr",[s("td",[t._v(t._s(a+1))]),t._v(" "),s("td",[t._v(t._s(e.product.name))]),t._v(" "),s("td",{attrs:{nowrap:""}},[s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(s){s.preventDefault(),t.decrementLineQty(e)}}},[s("i",{staticClass:"fa fa-arrow-down"})]),t._v(" "),s("button",{staticClass:"btn-outline-primary btn-circle"},[t._v(t._s(e.qty))]),t._v(" "),s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(s){s.preventDefault(),t.incrementLineQty(e)}}},[s("i",{staticClass:"fa fa-arrow-up"})]),t._v(" "),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-outline-danger btn-xs",on:{click:function(s){s.preventDefault(),t.confirmDeleteLine(e.product.id)}}},[s("i",{staticClass:"fa fa-trash-o"}),t._v(" удалить")])])]),t._v(" "),s("td",{attrs:{nowrap:""}},[s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(s){s.preventDefault(),t.decrementLineDiscount(e)}}},[s("i",{staticClass:"fa fa-arrow-down"})]),t._v(" "),s("button",{staticClass:"btn-outline-success btn-circle"},[t._v(t._s(e.discount_perc))]),t._v(" "),s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(s){s.preventDefault(),t.incrementLineDiscount(e)}}},[s("i",{staticClass:"fa fa-arrow-up"})])]),t._v(" "),s("td",[t._v(t._s(e.total))])])}))]),t._v(" "),s("hr"),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.countOrderLines,expression:"countOrderLines"}]},[s("h4",{staticClass:"sub-title space-top space-bottom"},[t._v("Итого: "),s("span",{staticClass:"badge badge-primary"},[t._v(t._s(t.total))])]),t._v(" "),s("h4",{staticClass:"sub-title space-top space-bottom"},[t._v("Скидка: "),s("span",{staticClass:"badge badge-primary"},[t._v(t._s(t.totalDiscount))])])]),t._v(" "),s("h3",{directives:[{name:"show",rawName:"v-show",value:t.countOrderLines,expression:"countOrderLines"}],staticClass:"text-danger"},[t._v("Данные клиента")]),t._v(" "),s("client-chooser",{directives:[{name:"show",rawName:"v-show",value:t.countOrderLines,expression:"countOrderLines"}],attrs:{hasKids:!1},model:{value:t.clientInfo,callback:function(e){t.clientInfo=e},expression:"clientInfo"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.countOrderLines,expression:"countOrderLines"}],staticClass:"text-center"},[s("br"),s("hr"),t._v(" "),s("button",{staticClass:"btn btn-warning btn-lg",on:{click:function(e){e.preventDefault(),t.submitOrder(e)}}},[t._v("Оформить")])])],1)]),t._v(" "),s("simplert",{ref:"deleteProduct"})],1)])},staticRenderFns:[]}},646:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view")],1)},staticRenderFns:[]}},647:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container d-flex h-100"},[s("div",{staticClass:"row align-self-center"},[t.user?s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"card",staticStyle:{height:"250px"}},[s("div",{staticClass:"card-block text-center text-success"},[s("i",{staticClass:"fa fa-3x fa-user"}),t._v(" "),s("h4",{staticClass:"card-title"},[t._v(t._s(t.user.name))]),t._v(" "),s("p",{staticClass:"card-text"},[t._v("Этот пользователь сейчас в системе")]),t._v(" "),s("router-link",{staticClass:"btn btn-danger",attrs:{to:"/logout"}},[s("i",{staticClass:"fa fa-sign-out"}),t._v(" Завершить сеанс")])],1)])]):t._e(),t._v(" "),s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"card",staticStyle:{height:"250px"}},[s("div",{staticClass:"card-block text-center text-success"},[s("i",{staticClass:"fa fa-3x fa-calendar"}),t._v(" "),s("h4",{staticClass:"card-title"},[t._v("Запись")]),t._v(" "),s("p",{staticClass:"card-text"},[t._v("Запись клиента на сеанс, листы записи")]),t._v(" "),s("router-link",{staticClass:"btn btn-success",attrs:{to:"/schedule/1"}},[s("i",{staticClass:"fa fa-sign-in"}),t._v(" Перейти")])],1)])]),t._v(" "),s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"card",staticStyle:{height:"250px"}},[s("div",{staticClass:"card-block text-center text-primary"},[s("i",{staticClass:"fa fa-3x fa-usd"}),t._v(" "),s("h4",{staticClass:"card-title"},[t._v("Продажа")]),t._v(" "),s("p",{staticClass:"card-text"},[t._v("Продажа абонементов и сопутствующих товаров")]),t._v(" "),s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/pos"}},[s("i",{staticClass:"fa fa-sign-in"}),t._v(" Начать продажу")])],1)])]),t._v(" "),t.user&&t.user.is_admin?s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-block text-center text-warning"},[s("i",{staticClass:"fa fa-3x fa-users"}),t._v(" "),s("h4",{staticClass:"card-title"},[t._v("Учет рабочего времени")]),t._v(" "),s("p",{staticClass:"card-text"},[t._v("Контроль рабочего времени администраторов.")]),t._v(" "),s("router-link",{staticClass:"btn btn-warning",attrs:{to:"/worklog"}},[s("i",{staticClass:"fa fa-sign-in"}),t._v(" Перейти")])],1)])]):t._e()])])},staticRenderFns:[]}},648:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("section",{attrs:{slot:"content"},slot:"content"},[s("h4",{staticClass:"sub-title space-top space-bottom"},[t._v("Список продаж")]),s("div",{staticClass:"col-lg-4"},[s("datepicker",{attrs:{bootstrapStyling:!0,"monday-first":!0,language:"ru","input-class":"bg-primary text-white"},on:{selected:t.selectDate},model:{value:t.chosenDate,callback:function(e){t.chosenDate=e},expression:"chosenDate"}})],1),s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",{attrs:{width:"150"}},[t._v("Дата/Время")]),s("th",[t._v("Клиент")]),s("th",{attrs:{width:"100"}},[t._v("Сумма")]),s("th",{attrs:{width:"200"}},[t._v("Действия")])])]),s("tbody",t._l(t.orders,function(e){return s("tr",{class:{"is-deleted":e.is_deleted}},[s("td",[t._v(t._s(e.date))]),s("td",[t._v(t._s(e.client))]),s("td",[t._v(t._s(e.total))]),s("td",[e.is_deleted?t._e():s("button",{staticClass:"btn btn-danger",on:{click:function(s){t.deleteOrder(e)}}},[s("i",{staticClass:"fa fa-trash-o"}),t._v("  Отменить")]),e.is_deleted?s("span",{staticClass:"badge badge-warning"},[t._v("Отменено")]):t._e()])])}))])])])},staticRenderFns:[]}},649:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("nav",{staticClass:"navbar navbar-toggleable-md navbar-inverse bg-inverse"},[s("div",{staticClass:"container full-width"},[s("div",{staticClass:"collapse navbar-collapse"},[t.user?s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"nav-item"},[s("a",{staticStyle:{color:"white"}},[t._v("Пользователь: "+t._s(t.user.name)+" ")])])]):t._e(),t._v(" "),t.user?s("ul",{staticClass:"navbar-nav ml-auto mr-0"},[s("li",{staticClass:"nav-item",class:{active:"schedule"==t.$route.name}},[s("a",{staticClass:"nav-link badge",class:{"badge-primary":"schedule"==t.$route.name},attrs:{href:"#schedule/1"}},[t._v("Запись")])]),t._v(" "),s("li",{staticClass:"nav-item",class:{active:"pos"==t.$route.name}},[s("a",{staticClass:"nav-link badge",class:{"badge-primary":"pos"==t.$route.name},attrs:{href:"#pos"}},[t._v("Продажа")])]),t._v(" "),s("li",{staticClass:"nav-item",class:{active:"pos-history"==t.$route.name}},[s("a",{staticClass:"nav-link badge",class:{"badge-primary":"pos-history"==t.$route.name},attrs:{href:"#pos-history"}},[t._v("История продаж")])]),t._v(" "),s("li",{staticClass:"nav-item",class:{active:"clients"==t.$route.name}},[s("a",{staticClass:"nav-link badge",class:{"badge-primary":"clients"==t.$route.name},attrs:{href:"#clients"}},[t._v("Клиенты")])]),t._v(" "),s("li",{staticClass:"nav-item",class:{active:"worklog"==t.$route.name}},[s("a",{staticClass:"nav-link badge",class:{"badge-primary":"worklog"==t.$route.name},attrs:{href:"#worklog"}},[t._v("Учет рабочего времени")])]),t._v(" "),t._m(0)]):t._e()])])]),t._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[t._t("content")],2),t._v(" "),s("simplert",{ref:"alert"})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link badge badge-danger",attrs:{href:"#logout"}},[s("i",{staticClass:"fa fa-sign-out"}),t._v(" Завершить работу")])])}]}},650:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.getClassName("wrapper")+" autocomplete-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],ref:"input",class:t.getClassName("input")+" autocomplete-input",attrs:{type:"text",id:t.id,name:t.name,autocomplete:"off",required:t.required},domProps:{value:t.type},on:{input:[function(e){e.target.composing||(t.type=e.target.value)},t.handleInput],dblclick:t.handleDoubleClick,blur:t.handleBlur,keydown:t.handleKeyDown,focus:t.handleFocus}}),t._v(" "),s("label",{staticClass:"text-danger",attrs:{for:"frm-user_data_name_first"}},[t._v(t._s(t.placeholder)+"\n    "),s("span",{staticClass:"error_text"},[t._v("Введите значение")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showList&&t.json.length,expression:"showList && json.length"}],class:t.getClassName("list")+" autocomplete autocomplete-list"},[s("ul",t._l(t.json,function(e,n){return s("li",{class:t.activeClass(n)},[s("a",{attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.selectList(e)},mousemove:function(e){t.mousemove(n)}}},[t.onShouldRenderChild?s("div",{domProps:{innerHTML:t._s(t.onShouldRenderChild(e))}}):t._e(),t._v(" "),t.onShouldRenderChild?t._e():s("div",[s("b",{staticClass:"autocomplete-anchor-text"},[t._v(t._s(t.deepValue(e,t.anchor)))]),t._v(" "),s("span",{staticClass:"autocomplete-anchor-label"},[t._v(t._s(t.deepValue(e,t.label)))])])])])}))])])},staticRenderFns:[]}},651:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"simplert",class:t.classSimplert,attrs:{role:"modal"},on:{click:t.closeOverlay}},[s("div",{staticClass:"simplert__content",class:t.classContent},[s("div",{staticClass:"simplert__header"},[t.showXclose?s("div",{staticClass:"simplert__x",on:{click:t.justCloseSimplert}},[t._v("╳")]):t._e(),t._v(" "),t.useIcon?s("div",["info"===t.type?s("div",{staticClass:"simplert__icon simplert__icon--info"},[s("div",{staticClass:"simplert__line simplert__line--info"}),t._v(" "),s("div",{staticClass:"simplert__line simplert__line--info-2"})]):t._e(),t._v(" "),"success"===t.type?s("div",{staticClass:"simplert__icon simplert__icon--success"},[s("div",{staticClass:"simplert__line simplert__line--success"}),t._v(" "),s("div",{staticClass:"simplert__line simplert__line--success-2"})]):t._e(),t._v(" "),"warning"===t.type?s("div",{staticClass:"simplert__icon simplert__icon--warning"},[s("div",{staticClass:"simplert__line simplert__line--warning"}),t._v(" "),s("div",{staticClass:"simplert__line simplert__line--warning-2"})]):t._e(),t._v(" "),"error"===t.type?s("div",{staticClass:"simplert__icon simplert__icon--error"},[s("div",{staticClass:"simplert__line simplert__line--error"}),t._v(" "),s("div",{staticClass:"simplert__line simplert__line--error-2"})]):t._e(),t._v(" "),""!==t.customIconUrl?s("div",{staticClass:"simplert__icon"},[s("img",{attrs:{src:t.customIconUrl}})]):t._e()]):t._e(),t._v(" "),s("b",{staticClass:"simplert__title"},[t._v(t._s(t.title))])]),t._v(" "),s("div",{staticClass:"simplert__body"},[s("div",{domProps:{innerHTML:t._s(t.message)}})]),t._v(" "),s("div",{staticClass:"simplert__footer"},[t.useConfirmBtn&&!t.hideAllButton?s("button",{class:t.classBtnConfirm,on:{click:t.whenConfirm}},[t._v("\n        "+t._s(t.customConfirmBtnText)+"\n      ")]):t._e(),t._v(" "),t.hideAllButton?t._e():s("button",{class:t.classBtnClose,on:{click:t.closeSimplert}},[t._v("\n        "+t._s(t.customCloseBtnText)+"\n      ")])])])])},staticRenderFns:[]}},652:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("div",{staticClass:"container d-flex h-100",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"row align-self-center"},[s("form",{on:{submit:function(e){e.preventDefault(),t.login(t.user)}}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-envelope fa-fw"})]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.login,expression:"user.login"}],staticClass:"form-control",attrs:{placeholder:"Имя пользователя"},domProps:{value:t.user.login},on:{input:function(e){e.target.composing||(t.user.login=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-lock fa-fw"})]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||(t.user.password=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary"},[t._v("\n          Войти\n        ")])])])])])])},staticRenderFns:[]}},653:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-user_data is-correct"},[s("form",{attrs:{action:"?",method:"post",novalidate:""}},[s("hr",{staticClass:"b-line_hr"}),t._v(" "),s("div",{staticClass:"input-group",class:{"is-correct":t.isCorrect("name"),"has-error":t.hasError("name")},on:{input:function(e){t.watchInputData()}}},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"icon-card"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"21 3146 34 26"}},[s("g",{attrs:{"data-name":"Group 2",transform:"translate(0 2907)"}},[s("g",{attrs:{transform:"translate(21 240)"}},[s("path",{attrs:{"data-name":"Path 14",d:"M3.669 23.559H29.931A3.692 3.692 0 0 0 33.6 19.89V3.669A3.692 3.692 0 0 0 29.931 0H3.669A3.692 3.692 0 0 0 0 3.669V19.89a3.692 3.692 0 0 0 3.669 3.669ZM1.159 3.669a2.506 2.506 0 0 1 2.51-2.51H29.931a2.506 2.506 0 0 1 2.51 2.51V19.89a2.506 2.506 0 0 1-2.51 2.51H3.669a2.506 2.506 0 0 1-2.51-2.51Z"}}),s("path",{attrs:{"data-name":"Path 15",d:"M15.145 26.29A7.145 7.145 0 1 0 8 19.145a7.145 7.145 0 0 0 7.145 7.145Zm-4.21-2.9a5.967 5.967 0 0 1 8.419 0 5.959 5.959 0 0 1-4.21 1.738 5.89 5.89 0 0 1-4.21-1.738Zm4.21-3.283a1.73 1.73 0 1 1 1.231-0.507 1.738 1.738 0 0 1-1.231Zm0-6.952A5.975 5.975 0 0 1 20.088 22.5a6.913 6.913 0 0 0-3.244-1.777 2.889 2.889 0 1 0-4.6-2.317 2.785 2.785 0 0 0 1.2 2.317A7.268 7.268 0 0 0 10.2 22.5a5.975 5.975 0 0 1 4.943-9.346Z",transform:"translate(-4.91 -7.366)"}}),s("rect",{attrs:{"data-name":"Rectangle 3",width:"9.926",height:"1.159",transform:"translate(19.465 7.338)"}}),s("rect",{attrs:{"data-name":"Rectangle 4",width:"9.926",height:"1.159",transform:"translate(19.465 11.2)"}}),s("rect",{attrs:{"data-name":"Rectangle 5",width:"9.926",height:"1.159",transform:"translate(19.465 15.062)"}})])])])])]),t._v(" "),s("autocomplete",{attrs:{url:t.searchUrl,customHeaders:t.authHeaders,anchor:"name",label:"phone","class-name":"form-control","on-select":t.initCustomer,min:2,id:"frm-user_data_name_first",required:!0,placeholder:"Имя"},model:{value:t.clientInfo.name,callback:function(e){t.clientInfo.name=e},expression:"clientInfo.name"}}),t._v(" "),s("i",{staticClass:"icon-v"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"319.396 3946.679 23.204 18.823"}},[s("g",{attrs:{transform:"translate(244 4221.001)"}},[s("g",{attrs:{"data-name":"Group 32",transform:"translate(45 -1263.183)"}},[s("path",{attrs:{"data-name":"Path 48",d:"M51.1,989.748l-12.613,14.244-5.59-5.4a1.085,1.085,0,0,0-1.642.182,1.62,1.62,0,0,0,.154,1.939l6.388,6.169a1.066,1.066,0,0,0,1.543-.064l13.357-15.08a1.6,1.6,0,0,0,.278-1.578c-.526-1.006-1.2-.969-1.875-.414Z",transform:"translate(0 0)"}})])])])]),t._v(" "),s("i",{staticClass:"icon-x spt spt-icon_x_31x33"})],1),t._v(" "),s("div",{staticClass:"input-group",class:{"is-correct":t.isCorrect("phone"),"has-error":t.hasError("phone")}},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"icon-phone"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"20 3344 26 33"}},[s("g",{attrs:{"data-name":"Group 202",transform:"translate(-5 2910)"}},[s("g",{attrs:{transform:"translate(-3 410.333)"}},[s("g",{attrs:{"data-name":"Group 14",transform:"translate(30.284 24.668)"}},[s("g",{attrs:{"data-name":"Group 13"}},[s("path",{staticClass:"cls-2",attrs:{"data-name":"Path 20",d:"M42.281,33.776a.178.178,0,0,0,.2.088l2.23-.5a.178.178,0,0,0,.112-.079.176.176,0,0,0,.023-.135l-1.864-8.345A.182.182,0,0,0,42.9,24.7a.174.174,0,0,0-.134-.024l-2.232.5a.179.179,0,0,0-.112.079.186.186,0,0,0-.023.135l1.865,8.345A.193.193,0,0,0,42.281,33.776Z",transform:"translate(-34.374 -24.668)"}}),s("path",{staticClass:"cls-2",attrs:{"data-name":"Path 21",d:"M50.808,54.971l-5.676-5.737a.178.178,0,0,0-.211-.031l-.747.41c-.887.485-2.676.448-3.2-.515L35.151,38.472c-.528-.963.4-2.491,1.291-2.976l.747-.41a.177.177,0,0,0,.088-.2L35.5,27.019a.178.178,0,0,0-.312-.075c-.144.174-3.54,4.268-4.234,5.949-1.408,3.408-.594,7.924,2.418,13.422l.032.06c3.012,5.5,6.378,8.615,10.009,9.265,1.79.32,7.068-.337,7.292-.365a.176.176,0,0,0,.146-.118A.178.178,0,0,0,50.808,54.971Z",transform:"translate(-30.284 -25.562)"}}),s("path",{staticClass:"cls-2",attrs:{"data-name":"Path 22",d:"M64.223,66.453a.177.177,0,0,0,.054-.126.186.186,0,0,0-.052-.126L58.2,60.137a.179.179,0,0,0-.252,0l-1.621,1.612a.177.177,0,0,0-.03.212.167.167,0,0,0,.029.04l6.028,6.065a.179.179,0,0,0,.252,0Z",transform:"translate(-40.798 -38.997)"}})])])])])])])]),t._v(" "),s("masked-input",{staticClass:"form-control-input",attrs:{required:"",mask:"(111)111-11-11",id:"frm-user_data_phone"},on:{input:function(e){t.clientInfo.phoneRaw=arguments[1],t.watchInputData("phone")}},model:{value:t.clientInfo.phone,callback:function(e){t.clientInfo.phone=e},expression:"clientInfo.phone"}}),t._v(" "),t._m(0),t._v(" "),s("i",{staticClass:"icon-v"},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"319.396 3946.679 23.204 18.823"}},[s("g",{attrs:{transform:"translate(244 4221.001)"}},[s("g",{attrs:{"data-name":"Group 32",transform:"translate(45 -1263.183)"}},[s("path",{attrs:{"data-name":"Path 48",d:"M51.1,989.748l-12.613,14.244-5.59-5.4a1.085,1.085,0,0,0-1.642.182,1.62,1.62,0,0,0,.154,1.939l6.388,6.169a1.066,1.066,0,0,0,1.543-.064l13.357-15.08a1.6,1.6,0,0,0,.278-1.578c-.526-1.006-1.2-.969-1.875-.414Z",transform:"translate(0 0)"}})])])])]),t._v(" "),s("i",{staticClass:"icon-x spt spt-icon_x_31x33"})],1),t._v(" "),t.hasKids?[s("div",{staticClass:"row",staticStyle:{"min-height":"100px"}},[s("div",{staticClass:"col"},[s("h2",{staticClass:"text-info"},[t._v("Взрослые")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.adults,expression:"clientInfo.adults"}],staticClass:"form-control-input",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.clientInfo.adults=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Нет")]),t._v(" "),s("option",[t._v("1")]),t._v(" "),s("option",[t._v("2")]),t._v(" "),s("option",[t._v("3")]),t._v(" "),s("option",[t._v("4")]),t._v(" "),s("option",[t._v("5")]),t._v(" "),s("option",[t._v("6")])])]),t._v(" "),s("div",{staticClass:"col"},[s("h2",{staticClass:"text-info"},[t._v("Дети до 7")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.kids,expression:"clientInfo.kids"}],staticClass:"form-control-input",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.clientInfo.kids=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Нет")]),t._v(" "),s("option",[t._v("1")]),t._v(" "),s("option",[t._v("2")]),t._v(" "),s("option",[t._v("3")]),t._v(" "),s("option",[t._v("4")])])]),t._v(" "),s("div",{staticClass:"col"},[s("h2",{staticClass:"text-info"},[t._v("Дети старше 7")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.kidsAfter7,expression:"clientInfo.kidsAfter7"}],staticClass:"form-control-input",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.clientInfo.kidsAfter7=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("Нет")]),t._v(" "),s("option",[t._v("1")]),t._v(" "),s("option",[t._v("2")]),t._v(" "),s("option",[t._v("3")]),t._v(" "),s("option",[t._v("4")])])])]),t._v(" "),s("div",{staticClass:"form-check",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[s("label",{staticClass:"form-check-label text-success",staticStyle:{"font-size":"1.75rem"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.is_free,expression:"clientInfo.is_free"}],staticClass:"form-check-input",attrs:{type:"radio",name:"is_free"},domProps:{value:1,checked:t._q(t.clientInfo.is_free,1)},on:{__c:function(e){t.clientInfo.is_free=1}}}),t._v(" Бесплатно\n      ")]),t._v(" "),s("label",{staticClass:"form-check-label text-warning",staticStyle:{"font-size":"1.75rem"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.is_free,expression:"clientInfo.is_free"}],staticClass:"form-check-input",attrs:{type:"radio",name:"is_free"},domProps:{value:0,checked:t._q(t.clientInfo.is_free,0)},on:{__c:function(e){t.clientInfo.is_free=0}}}),t._v(" Платно\n      ")])]),t._v(" "),s("h2",{staticClass:"text-info"},[t._v("Комментарий (клиент)")]),t._v(" "),s("div",{staticClass:"input-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.comment,expression:"clientInfo.comment"}],staticClass:"form-control",staticStyle:{"padding-top":"0px"},domProps:{value:t.clientInfo.comment},on:{input:function(e){e.target.composing||(t.clientInfo.comment=e.target.value)}}})]),t._v(" "),s("h2",{staticClass:"text-info"},[t._v("Комментарий (визит)")]),t._v(" "),s("div",{staticClass:"input-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.clientInfo.visitComment,expression:"clientInfo.visitComment"}],staticClass:"form-control",staticStyle:{"padding-top":"0px"},domProps:{value:t.clientInfo.visitComment},on:{input:function(e){e.target.composing||(t.clientInfo.visitComment=e.target.value)}}})])]:t._e()],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"text-danger",attrs:{for:"frm-user_data_phone"}},[t._v("Номер телефона"),s("span",{staticClass:"error_text"},[t._v("Ввведите значение в формате (920)123-45-67")])])}]}},654:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("section",{attrs:{slot:"content"},slot:"content"},[s("h4",{staticClass:"sub-title space-top space-bottom"},[t._v("Список клиентов")]),s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",[t._v("ID")]),s("th",[t._v("Имя")]),s("th",[t._v("Телефон")]),s("th",[t._v("Комментарий")]),s("th",[t._v("Зарегистрирован")]),s("th",[t._v("Записи/Продажи")]),s("th",{attrs:{width:"100"}},[t._v("Взрослые")]),s("th",{attrs:{width:"100"}},[t._v("Дети до 7/от 7")]),s("th",{attrs:{width:"140"}})])]),s("tbody",t._l(t.clients.data,function(e){return s("tr",{class:{"is-deleted":e.is_deleted}},[s("td",[t._v(t._s(e.id))]),s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(e.phone))]),s("td",[t._v(t._s(e.comment))]),s("td",[t._v(t._s(e.created_at))]),s("td",[t._v(t._s(e.num_apps)+" / "+t._s(e.num_orders))]),s("td",[t._v(t._s(e.adults))]),s("td",[t._v(t._s(e.kids)+" / "+t._s(e.kidsAfter7))]),s("td",[e.is_deleted?t._e():s("button",{staticClass:"btn btn-danger",on:{click:function(s){t.deleteClient(e)}}},[s("i",{staticClass:"fa fa-trash-o"})]),s("span",[t._v(" ")]),e.is_deleted?t._e():s("button",{staticClass:"btn btn-success",on:{click:function(s){t.editClient(e)}}},[s("i",{staticClass:"fa fa-edit"})]),e.is_deleted?s("span",{staticClass:"badge badge-warning"},[t._v("Удален")]):t._e()])])}))])])])},staticRenderFns:[]}},655:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("section",{staticClass:"c-booking",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md"},[s("h1",[t._v("Учет рабочего времени")]),t._v(" "),s("form",{staticClass:"form-inline"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Дата    ")]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,"monday-first":!0,inline:!1,language:"ru"},model:{value:t.form.work_date,callback:function(e){t.form.work_date=e},expression:"form.work_date"}})],1),t._v(" "),t.list.meta?s("div",{staticClass:"form-group  mx-sm-3"},[s("label",[t._v("Сотрудник    ")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.user_id,expression:"form.user_id"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.form.user_id=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("Не выбран")]),t._v(" "),t._l(t.list.meta.users.data,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]):t._e(),t._v(" "),s("div",{staticClass:"form-group  mx-sm-3"},[s("label",[t._v("Кол-во часов    ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.hrs,expression:"form.hrs"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"12",step:"1"},domProps:{value:t.form.hrs},on:{input:function(e){e.target.composing||(t.form.hrs=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group  mx-sm-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.submit}},[t._v("Добавить запись")])])]),t._v(" "),s("hr"),t._v(" "),s("h1",[t._v("Список")]),t._v(" "),s("form",{staticClass:"form-inline"},[s("div",{staticClass:"form-group"},[s("label",[t._v("C     ")]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,"monday-first":!0,inline:!1,language:"ru"},model:{value:t.filters.start_date,callback:function(e){t.filters.start_date=e},expression:"filters.start_date"}})],1),t._v(" "),t.list.meta?s("div",{staticClass:"form-group  mx-sm-3"},[s("label",[t._v("По     ")]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,"monday-first":!0,inline:!1,language:"ru"},model:{value:t.filters.end_date,callback:function(e){t.filters.end_date=e},expression:"filters.end_date"}})],1):t._e(),t._v(" "),t.list.meta?s("div",{staticClass:"form-group  mx-sm-3"},[s("label",[t._v("Сотрудник    ")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.user_id,expression:"filters.user_id"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filters.user_id=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("Все")]),t._v(" "),t._l(t.list.meta.users.data,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]):t._e(),t._v(" "),s("div",{staticClass:"form-group  mx-sm-3"},[s("button",{staticClass:"btn btn-outline-black",attrs:{type:"submit"},on:{click:t.refresh}},[t._v("Применить фильтр")])])]),t._v(" "),s("br"),s("br"),t._v(" "),t.list.data.length?s("table",{staticClass:"table table-striped"},[s("thead",[s("tr",[s("th",{staticStyle:{width:"150px"}},[t._v("Дата")]),t._v(" "),s("th",[t._v("Сотрудник")]),t._v(" "),s("th",[t._v("Кол-во часов")]),t._v(" "),s("th",[t._v("Действия")])])]),t._v(" "),s("tbody",t._l(t.list.data,function(e,n){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.work_date))]),t._v(" "),s("td",[t._v(t._s(e.user.name))]),t._v(" "),s("td",[t._v(t._s(e.hrs))]),t._v(" "),s("td",[s("click-confirm",{key:"cc"+e.id,attrs:{messages:{title:"Точно удалить?",yes:"ДА",no:"Ой, нет"}}},[s("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){t.deleteRow(n)}}},[s("i",{staticClass:"fa fa-trash-o"}),t._v(" Удалить")])])],1)])}))]):t._e()])])])])])},staticRenderFns:[]}},663:function(t,e,s){s(305),t.exports=s(304)},88:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(338),i=n(a),o=s(339),r=n(o),l=s(340),u=n(l);e.default={login:i.default,logout:r.default,getUser:u.default}},89:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(345),i=n(a),o=s(347),r=n(o),l=s(344),u=n(l),c=s(346),d=n(c);e.default={getCategories:i.default,submitOrder:r.default,deleteOrder:u.default,getOrders:d.default}},90:function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(349),i=n(a),o=s(352),r=n(o),l=s(351),u=n(l),c=s(350),d=n(c),f=s(348),m=n(f);e.default={getDates:i.default,sendAppointment:r.default,getTimeTable:d.default,saveAppointment:u.default,deleteAppointment:m.default}}},[663]);
//# sourceMappingURL=app.bec263ba216be652a249.js.map